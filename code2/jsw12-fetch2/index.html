<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <select id="sortSelect">
        <option value="default"> </option>
        <option value="nameASC">nome ASC</option>
        <option value="nameDESC">nome DESC</option>
        <option value="emailASC">email ASC</option>
        <option value="emailDESC">email DESC</option>
    </select>

    <table id="usersTable" border="1" cellpadding="10">
        <thead>
            <tr>
                <th>NAME</th>
                <th>EMAIL</th>
                <th>COMPANY</th>
            </tr>
        </thead>
    </table>

    <script>
        function addUserRows() {
            let content = "";
            for (let i = 0; i < globalUsers.length; i++) {
                content += `
                <tr>
                    <td>${globalUsers[i].name}</td>
                    <td>${globalUsers[i].email}</td>
                    <td>${globalUsers[i].company.name}</td>
                </tr>
                `
            }
            usersTable.innerHTML += content;
        }

        const usersTable = document.querySelector("#usersTable");
        const sortSelect = document.querySelector("#sortSelect");

        fetch("https://jsonplaceholder.typicode.com/users")
            .then(function (response) {
                return response.json();
            })
            .then(function (result) {
                globalUsers = result;
                addUserRows();
            })
            .catch(function (error) {
                console.log(error)
            });

        let globalUsers = [];

        sortSelect.addEventListener("change", function () {
            console.log(sortSelect.value);
            console.log(globalUsers)
            globalUsers.sort(function (a, b) {
                console.log(a)
                console.log(b)
                let result = 0
                if (a.name < b.name) {
                    result = -1
                } else if (a.name > b.name) {
                    result = 1
                } else {
                    result = 0
                }
                console.log(result)
                return result
            });
            console.log(globalUsers);

            // TODO: assim so estou a acrescentar
            // preciso limpar a tabela primeiro
            addUserRows();
        });
    </script>

</body>

</html>